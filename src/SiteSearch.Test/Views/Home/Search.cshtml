@model SearchResult<SearchItem>;
@using SiteSearch.Core.Models
@using SiteSearch.Middleware
@{
    ViewData["Title"] = "Home Page";
}

<style>
    #search-results {
        margin-left: auto;
        margin-right: auto;
        width: calc(100% - 200px);
    }

    #search-results .mui-textfield {
            display: inline-block;
            width: calc(100% - 117px);
    }

    #search-results input[type='text'] {
        width: 100%;
    }

    #search-results .search-facets {
        float: left;
        width: 25%;
    }

    #search-results .search-facets h2 {
        margin-top: 0;
        padding-top: 0;
    }

    #search-results .search-items {
        float: left;
        width: 75%;
    }
</style>

<div id="search-results">
    <div class="mui-panel">
    <form class="mui-form--inline">
        <div class="mui-textfield">
            <input type="text" autofocus name="q" value="@Model.CurrentCriteria.GetCriteriaValueByAlias("q")" placeholder="Search ..." style="padding: 5px 10px;" />
        </div>
        <button type="submit" class="mui-btn mui-btn--primary">Search</button>
    </form>
    </div>
    <div class="search-facets">
        @foreach (var facetGroup in Model.FacetGroups)
        {
            <h2>@facetGroup.Field</h2>
            <ul>
            @foreach (var facet in facetGroup.Facets)
            {
                <li>@facet.Key (@facet.Count)</li>
            }
            </ul>
        }
    </div>
    <div class="search-items">
        @if (Model.Hits.Any())
        {
            <p>
                Showing @Model.Hits.Count() of @Model.TotalHits results ...
            </p>

            <div class="result-list">
                @foreach (var item in Model.Hits)
                {
                    <div class="result">
                        <h2>
                            <a href="@item.Url" target="_blank">@Html.Raw(item.Title)</a>
                        </h2>
                        <p>@Html.Raw(item.Precis)</p>
                    </div>
                }
            </div>
        }
        else
        {
            <p>No results found.</p>
        }
    </div>
</div>
